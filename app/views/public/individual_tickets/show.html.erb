<h1>個別チケット詳細</h1>

<div class="card">
  <div class="card-body">
    <!-- シリアルナンバー -->
    <h3>シリアルナンバー: <%= @individual_ticket.serial_number %></h3>

    <!-- 状態 -->
    <p><strong>状態:</strong> <%= t("enums.individual_ticket.status.#{@individual_ticket.status}") %></p>

    <!-- 所有者 -->
    <p>
      <strong>所有者:</strong>
      <%= @individual_ticket.owner ? @individual_ticket.owner.name : "未割り当て" %>
    </p>

    <!-- 親チケット情報 -->
    <h4>親チケット情報</h4>
    <ul>
      <li><strong>チケット名:</strong> <%= @individual_ticket.ticket.name %></li>
      <li><strong>説明:</strong> <%= @individual_ticket.ticket.description %></li>
      <li><strong>有効期限:</strong> <%= @individual_ticket.ticket.expiration_date || "指定なし" %></li>
    </ul>

    <!-- 発行者向けのメッセージ -->
    <% if @individual_ticket.ticket.issuer == current_user %>
      <p>※あなたはこのチケットの発行者です。</p>
    <% end %>

    <!-- 所有者向けのアクション -->
    <% if @individual_ticket.owner == current_user %>
      <%= link_to "使用済みにする", mark_as_used_individual_ticket_path(@individual_ticket), method: :patch, class: "btn btn-success", data: { confirm: "本当にこのチケットを使用済みにしますか？" } %>
    <% end %>
  </div>
</div>

<%= link_to "戻る", individual_tickets_path, class: "btn btn-secondary" %>
